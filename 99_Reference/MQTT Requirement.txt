
---

## âœ… MQTT Connection Checklist

1. **Broker address**

   * Hostname or IP (e.g., `broker.hivemq.com` or `192.168.1.10`)
   * Port:

     * **1883** â†’ plain MQTT (no TLS)
     * **8883** â†’ MQTT over TLS
     * (custom ports possible)

2. **Protocol**

   * MQTT v3.1, v3.1.1, or v5.0 (make sure client and broker match).

3. **Topic(s)**

   * The publish/subscribe topic(s) you need to use.
   * Topic structure/naming convention (e.g., `factory/machine1/temperature`).

4. **QoS level**

   * 0 (at most once), 1 (at least once), or 2 (exactly once).

5. **Authentication**

   * **None** â†’ open broker (rare in production).
   * **Username/Password** â†’ common in secured brokers.
   * **Client certificates (TLS)** â†’ mutual TLS for strong identity verification.

6. **Certificates / Security**

   * If TLS is required:

     * CA certificate (to verify broker).
     * Client certificate + key (if broker enforces mutual TLS).
   * Decide whether to allow self-signed certs (`tls_insecure_set(True)` in Python).

7. **Session options**

   * **Clean session / persistent session** (whether subscriptions survive reconnects).
   * **Client ID** (unique identifier for the client).

8. **Keep Alive**

   * Heartbeat interval (seconds). Client pings broker to stay connected.

9. **Will message (LWT â€“ Last Will and Testament)**

   * Optional: broker publishes a predefined message if the client disconnects unexpectedly.
   * Useful in IoT/industrial cases to signal device failure.

10. **Payload format**

    * JSON, binary, text, etc.
    * Consistent encoding (UTF-8, base64, etc.).

---

ğŸ“Œ In short:
You already had the **big three** (host, QoS, security). Add in **topics, protocol version, client ID/session, keepalive, and LWT** to cover real-world setups.


---

## âœ… MQTT é€£ç·šæª¢æŸ¥æ¸…å–®

1. **Broker ä¸»æ©Ÿè³‡è¨Š**

   * ä¸»æ©Ÿåç¨± (Hostname) æˆ– IP ä½å€
   * Port (å¸¸è¦‹ï¼š1883 = ç„¡åŠ å¯†ã€8883 = TLS/SSL åŠ å¯†)

2. **å”å®šç‰ˆæœ¬**

   * MQTT v3.1 / v3.1.1 / v5.0

3. **Topic ä¸»é¡Œ**

   * ç™¼å¸ƒ (Publish) / è¨‚é–± (Subscribe) æ‰€éœ€çš„ä¸»é¡Œåç¨±
   * ä¸»é¡Œå±¤ç´šè¦åŠƒ (ä¾‹å¦‚ï¼š`factory/machine1/temperature`)

4. **QoS ç­‰ç´š**

   * 0 = è‡³å¤šä¸€æ¬¡ (at most once)
   * 1 = è‡³å°‘ä¸€æ¬¡ (at least once)
   * 2 = æ°å¥½ä¸€æ¬¡ (exactly once)

5. **èªè­‰æ–¹å¼**

   * ç„¡ (é–‹æ”¾å¼ï¼Œè¼ƒå°‘ç”¨)
   * ä½¿ç”¨è€…åç¨± + å¯†ç¢¼
   * å®¢æˆ¶ç«¯æ†‘è­‰ (Mutual TLSï¼Œé›™å‘é©—è­‰)

6. **æ†‘è­‰ / å®‰å…¨æ€§**

   * CA æ†‘è­‰ï¼ˆé©—è­‰ Broker èº«åˆ†ï¼‰
   * Client æ†‘è­‰ + é‡‘é‘°ï¼ˆè‹¥éœ€è¦é›™å‘ TLS é©—è­‰ï¼‰
   * æ˜¯å¦å…è¨±è‡ªç°½æ†‘è­‰ (æ¸¬è©¦ç”¨ï¼Œç”Ÿç”¢ç’°å¢ƒå»ºè­°é—œé–‰)

7. **Session è¨­å®š**

   * Clean Sessionï¼ˆæ˜¯å¦æ¸…é™¤å…ˆå‰çš„é€£ç·šç‹€æ…‹ï¼‰
   * Client IDï¼ˆæ¯å€‹å®¢æˆ¶ç«¯éœ€å”¯ä¸€ï¼‰

8. **Keep Alive ä¿æ´»é–“éš”**

   * å¿ƒè·³æ™‚é–“ï¼ˆç§’æ•¸ï¼‰ï¼Œå®šæœŸå‘ Broker ç™¼é€ ping

9. **LWTï¼ˆéºå›‘è¨Šæ¯ï¼ŒLast Will and Testamentï¼‰**

   * ç”¨æ–¼ç•¶å®¢æˆ¶ç«¯ç•°å¸¸æ–·ç·šæ™‚ï¼ŒBroker è‡ªå‹•ç™¼å¸ƒçš„è¨Šæ¯

10. **Payload æ ¼å¼**

    * JSONã€ç´”æ–‡å­—ã€äºŒé€²ä½è³‡æ–™
    * çµ±ä¸€çš„ç·¨ç¢¼æ–¹å¼ï¼ˆä¾‹å¦‚ UTF-8ï¼‰
